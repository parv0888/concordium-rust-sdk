<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A type that can be used to collect auxiliary information while a mutable trie is being frozen. Particular use-cases of this are collecting the size of new data, as well as new persistent nodes."><meta name="keywords" content="rust, rustlang, rust-lang, Collector"><title>Collector in wasm_chain_integration::v1::trie - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../../storage.js"></script><script src="../../../crates.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../../wasm_chain_integration/index.html'><div class='logo-container rust-logo'><img src='../../../rust-logo.png' alt='logo'></div></a><h2 class="location">Trait Collector</h2><div class="sidebar-elems"><div class="block items"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><div class="sidebar-links"><a href="#tymethod.add_children">add_children</a><a href="#tymethod.add_path">add_path</a><a href="#tymethod.add_value">add_value</a></div><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div><h2 class="location">Other items in<br><a href="../../index.html">wasm_chain_integration</a>::<wbr><a href="../index.html">v1</a>::<wbr><a href="index.html">trie</a></h2><div id="sidebar-vars" data-name="Collector" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Trait <a href="../../index.html">wasm_chain_integration</a>::<wbr><a href="../index.html">v1</a>::<wbr><a href="index.html">trie</a>::<wbr><a class="trait" href="#">Collector</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../src/wasm_chain_integration/v1/trie/types.rs.html#128-138" title="goto source code">[src]</a></span></h1><div class="docblock type-decl"><pre class="rust trait"><code>pub trait Collector&lt;V&gt; {
    fn <a href="#tymethod.add_value" class="fnname">add_value</a>(&amp;mut self, data: <a class="primitive" href="https://doc.rust-lang.org/1.57.0/std/primitive.reference.html">&amp;</a>V);
<div class="item-spacer"></div>    fn <a href="#tymethod.add_path" class="fnname">add_path</a>(&amp;mut self, path: <a class="primitive" href="https://doc.rust-lang.org/1.57.0/std/primitive.usize.html">usize</a>);
<div class="item-spacer"></div>    fn <a href="#tymethod.add_children" class="fnname">add_children</a>(&amp;mut self, num_children: <a class="primitive" href="https://doc.rust-lang.org/1.57.0/std/primitive.usize.html">usize</a>);
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A type that can be used to collect auxiliary information while a mutable
trie is being frozen. Particular use-cases of this are collecting the size
of new data, as well as new persistent nodes.</p>
<p>Note that ideally these methods should return Result/Option so that we can
terminate early in case of out of energy. However that is at the moment
complex to set up with the way we exchange data through the FFI. Thus for
now the behaviour is that we collect all the data, and then decide whether
the collected size is too large. This is adequate since other energy bounds
ensure that there is not too much data to collect, i.e., more than we could
handle. Nevertheless it would be cleaner if we could terminate early.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.add_value" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/wasm_chain_integration/v1/trie/types.rs.html#130" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.add_value" class="fnname">add_value</a>(&amp;mut self, data: <a class="primitive" href="https://doc.rust-lang.org/1.57.0/std/primitive.reference.html">&amp;</a>V)</h4></div></summary><div class="docblock"><p>Account for the stored value.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.add_path" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/wasm_chain_integration/v1/trie/types.rs.html#135" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.add_path" class="fnname">add_path</a>(&amp;mut self, path: <a class="primitive" href="https://doc.rust-lang.org/1.57.0/std/primitive.usize.html">usize</a>)</h4></div></summary><div class="docblock"><p>Account for the stored path in the node (the “stem”). See
<a href="super::low_level::Node">low_level</a> for an explanation of this concept.
The argument is the length of the path in <strong>chunks</strong>, i.e., 4-bit
segments.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.add_children" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/wasm_chain_integration/v1/trie/types.rs.html#137" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.add_children" class="fnname">add_children</a>(&amp;mut self, num_children: <a class="primitive" href="https://doc.rust-lang.org/1.57.0/std/primitive.usize.html">usize</a>)</h4></div></summary><div class="docblock"><p>Account for storing the given number of children.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><div id="impl-Collector%3CV%3E" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../../../src/wasm_chain_integration/v1/trie/types.rs.html#143-152" title="goto source code">[src]</a></div><a href="#impl-Collector%3CV%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;V&gt; <a class="trait" href="trait.Collector.html" title="trait wasm_chain_integration::v1::trie::Collector">Collector</a>&lt;V&gt; for <a class="struct" href="struct.EmptyCollector.html" title="struct wasm_chain_integration::v1::trie::EmptyCollector">EmptyCollector</a></h3></div><div id="impl-Collector%3CV%3E-1" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../../../src/wasm_chain_integration/v1/trie/types.rs.html#165-186" title="goto source code">[src]</a></div><a href="#impl-Collector%3CV%3E-1" class="anchor"></a><h3 class="code-header in-band">impl&lt;V:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.57.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.57.0/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.57.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.57.0/std/primitive.slice.html">]</a>&gt;&gt; <a class="trait" href="trait.Collector.html" title="trait wasm_chain_integration::v1::trie::Collector">Collector</a>&lt;V&gt; for <a class="struct" href="struct.SizeCollector.html" title="struct wasm_chain_integration::v1::trie::SizeCollector">SizeCollector</a></h3></div></div><script type="text/javascript" src="../../../implementors/wasm_chain_integration/v1/trie/trait.Collector.js" async></script></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="wasm_chain_integration" data-search-index-js="../../../search-index.js" data-search-js="../../../search.js"></div>
    <script src="../../../main.js"></script>
</body></html>