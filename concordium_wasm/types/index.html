<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="AST definition of Wasm modules, as well as supporting datatypes. Based on the W3C Wasm specification"><meta name="keywords" content="rust, rustlang, rust-lang, types"><title>concordium_wasm::types - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../concordium_wasm/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><h2 class="location">Module types</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="types" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">concordium_wasm</a>::<wbr><a class="mod" href="#">types</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/concordium_wasm/types.rs.html#1-587" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>AST definition of Wasm modules, as well as supporting datatypes.
Based on the <a href="https://www.w3.org/TR/2019/REC-wasm-core-1-20191205/#syntax-import">W3C Wasm specification</a></p>
<p>The main type is <a href="./struct.Module.html">Module</a>, which defines a Wasm
module, either validated or not validated. Some of the properties that are
stated as validity conditions in the Wasm specification are already
guaranteed automatically by the AST definition of the Module, and the
parsing functions.</p>
</div></details><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Code.html" title="concordium_wasm::types::Code struct">Code</a></div><div class="item-right docblock-short"><p>The body of a function.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CodeSection.html" title="concordium_wasm::types::CodeSection struct">CodeSection</a></div><div class="item-right docblock-short"><p>The code section, which contains the code of functions declared in the
module.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CustomSection.html" title="concordium_wasm::types::CustomSection struct">CustomSection</a></div><div class="item-right docblock-short"><p>A processed custom section. By specification all custom sections have a
name, followed by uninterpreted bytes.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Data.html" title="concordium_wasm::types::Data struct">Data</a></div><div class="item-right docblock-short"><p>The initialization of memory. The memory index is implicitly 0.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DataSection.html" title="concordium_wasm::types::DataSection struct">DataSection</a></div><div class="item-right docblock-short"><p>The data section, this is used to initialize linear memory upon start of
execution.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Element.html" title="concordium_wasm::types::Element struct">Element</a></div><div class="item-right docblock-short"><p>An element description, describing how to initialize the table.
The table index 0 is implicit, so we don’t record it in the struct.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ElementSection.html" title="concordium_wasm::types::ElementSection struct">ElementSection</a></div><div class="item-right docblock-short"><p>The element section, which is used to initialize the function table.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Export.html" title="concordium_wasm::types::Export struct">Export</a></div><div class="item-right docblock-short"><p>An exported item.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExportSection.html" title="concordium_wasm::types::ExportSection struct">ExportSection</a></div><div class="item-right docblock-short"><p>The export section, which lists exported functions, globals, etc.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Expression.html" title="concordium_wasm::types::Expression struct">Expression</a></div><div class="item-right docblock-short"><p>An expression is a sequence of instructions followed by the “end” delimiter,
which is also present in the binary format (see 5.4.6).</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.FunctionSection.html" title="concordium_wasm::types::FunctionSection struct">FunctionSection</a></div><div class="item-right docblock-short"><p>The function section. This contains types of declared functions.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.FunctionType.html" title="concordium_wasm::types::FunctionType struct">FunctionType</a></div><div class="item-right docblock-short"><p>A function type with at most one return value. The MVP version of Wasm does
not support multiple return values, and thus we don’t either.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Global.html" title="concordium_wasm::types::Global struct">Global</a></div><div class="item-right docblock-short"><p>A single Global declaration, with initial value.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.GlobalSection.html" title="concordium_wasm::types::GlobalSection struct">GlobalSection</a></div><div class="item-right docblock-short"><p>The list of globals declared in the module.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Import.html" title="concordium_wasm::types::Import struct">Import</a></div><div class="item-right docblock-short"><p>Import of an item from another module.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ImportSection.html" title="concordium_wasm::types::ImportSection struct">ImportSection</a></div><div class="item-right docblock-short"><p>The import section. This lists imports in the module.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Limits.html" title="concordium_wasm::types::Limits struct">Limits</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Local.html" title="concordium_wasm::types::Local struct">Local</a></div><div class="item-right docblock-short"><p>A local variable declaration in a function.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MemArg.html" title="concordium_wasm::types::MemArg struct">MemArg</a></div><div class="item-right docblock-short"><p>The immediate memory argument. Since all operations are on memory index 0
the index is implicit.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MemorySection.html" title="concordium_wasm::types::MemorySection struct">MemorySection</a></div><div class="item-right docblock-short"><p>The memory section, which contains declarations of linear memories. The Wasm
version we support only supports at most one memory section.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MemoryType.html" title="concordium_wasm::types::MemoryType struct">MemoryType</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Module.html" title="concordium_wasm::types::Module struct">Module</a></div><div class="item-right docblock-short"><p>A parsed Wasm module. This no longer has custom sections since they are not
needed for further processing.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Name.html" title="concordium_wasm::types::Name struct">Name</a></div><div class="item-right docblock-short"><p>A webassembly Name. We choose to have it be an owned value rather than a
reference into the original module. Names are also used in the parsed AST,
and we don’t want to retain references to the original bytes just because of
a few names.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.StartSection.html" title="concordium_wasm::types::StartSection struct">StartSection</a></div><div class="item-right docblock-short"><p>We do not support start sections, so this type has exactly one value, the
empty start section, which is of course also the value returned by the
Default instance.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TableSection.html" title="concordium_wasm::types::TableSection struct">TableSection</a></div><div class="item-right docblock-short"><p>The table section. The table is a list of functions and is used to support
indirect function calls.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TableType.html" title="concordium_wasm::types::TableType struct">TableType</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TypeSection.html" title="concordium_wasm::types::TypeSection struct">TypeSection</a></div><div class="item-right docblock-short"><p>The type section, which contains type definitions.</p>
</div></div></div><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.BlockType.html" title="concordium_wasm::types::BlockType enum">BlockType</a></div><div class="item-right docblock-short"><p>We only support the empty block type and a single value type. Type indices
are not supported in the MVP version of Wasm.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ExportDescription.html" title="concordium_wasm::types::ExportDescription enum">ExportDescription</a></div><div class="item-right docblock-short"><p>An exported item description. Since it is inconsequential whether extra
definitions are exported we allow all of them to be flexible with respect to
the external tooling.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.GlobalInit.html" title="concordium_wasm::types::GlobalInit enum">GlobalInit</a></div><div class="item-right docblock-short"><p>The initial global value with its type.
Because we do not allow imported globals, the initialization expression
must consist of a single constant value of the right type, which we
short-circuit into the single constant.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ImportDescription.html" title="concordium_wasm::types::ImportDescription enum">ImportDescription</a></div><div class="item-right docblock-short"><p>A single import description.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.OpCode.html" title="concordium_wasm::types::OpCode enum">OpCode</a></div><div class="item-right docblock-short"><p>See <a href="https://webassembly.github.io/spec/core/syntax/instructions.html">Wasm spec</a> for details of the meaning of the instructions.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ValueType.html" title="concordium_wasm::types::ValueType enum">ValueType</a></div><div class="item-right docblock-short"><p>Supported Wasm value types (i.e., no floats). We use a very low-level
encoding which we make use of to remove some needless allocations. In
particular the tags must be as specified by the Wasm specification and must
match the binary serialization.</p>
</div></div></div><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.FuncIndex.html" title="concordium_wasm::types::FuncIndex type">FuncIndex</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.GlobalIndex.html" title="concordium_wasm::types::GlobalIndex type">GlobalIndex</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.InstrSeq.html" title="concordium_wasm::types::InstrSeq type">InstrSeq</a></div><div class="item-right docblock-short"><p>A sequence of instructions.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.LabelIndex.html" title="concordium_wasm::types::LabelIndex type">LabelIndex</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.LocalIndex.html" title="concordium_wasm::types::LocalIndex type">LocalIndex</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.MemIndex.html" title="concordium_wasm::types::MemIndex type">MemIndex</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.StackHeight.html" title="concordium_wasm::types::StackHeight type">StackHeight</a></div><div class="item-right docblock-short"><p>A number of operands on the stack.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.StackSize.html" title="concordium_wasm::types::StackSize type">StackSize</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.TableIndex.html" title="concordium_wasm::types::TableIndex type">TableIndex</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.TypeIndex.html" title="concordium_wasm::types::TypeIndex type">TypeIndex</a></div><div class="item-right docblock-short"><p>Indices</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="concordium_wasm" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>