<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A program transformation that inserts metering instructions into a Wasm module."><meta name="keywords" content="rust, rustlang, rust-lang, metering_transformation"><title>wasm_transform::metering_transformation - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../wasm_transform/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><h2 class="location">Module metering_transformation</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="metering_transformation" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">wasm_transform</a>::<wbr><a class="mod" href="#">metering_transformation</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/wasm_transform/metering_transformation.rs.html#1-811" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A program transformation that inserts metering instructions into
a Wasm module.</p>
</div></details><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="cost/index.html" title="wasm_transform::metering_transformation::cost mod">cost</a></div><div class="item-right docblock-short"><p>Definition of energy costs of instructions.</p>
</div></div></div><h2 id="constants" class="section-header"><a href="#constants">Constants</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.FN_IDX_ACCOUNT_ENERGY.html" title="wasm_transform::metering_transformation::FN_IDX_ACCOUNT_ENERGY constant">FN_IDX_ACCOUNT_ENERGY</a></div><div class="item-right docblock-short"><p>TODO set these indices to the imports of the respective accounting host
functions. They should be given by the specification.
The type of this function should be i64 -&gt; ()</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.FN_IDX_MEMORY_ALLOC.html" title="wasm_transform::metering_transformation::FN_IDX_MEMORY_ALLOC constant">FN_IDX_MEMORY_ALLOC</a></div><div class="item-right docblock-short"><p>Charge for memory allocation. The type of this
function should be i32 -&gt; i32.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.FN_IDX_TRACK_CALL.html" title="wasm_transform::metering_transformation::FN_IDX_TRACK_CALL constant">FN_IDX_TRACK_CALL</a></div><div class="item-right docblock-short"><p>Dynamically track calls to enable us to limit the number of active
frames.
The type of this function should be unit to unit.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.FN_IDX_TRACK_RETURN.html" title="wasm_transform::metering_transformation::FN_IDX_TRACK_RETURN constant">FN_IDX_TRACK_RETURN</a></div><div class="item-right docblock-short"><p>Track returns so that we can keep the count correctly.
The type of this function should be () -&gt; ().</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.NUM_ADDED_FUNCTIONS.html" title="wasm_transform::metering_transformation::NUM_ADDED_FUNCTIONS constant">NUM_ADDED_FUNCTIONS</a></div><div class="item-right docblock-short"><p>The number of added functions. All functions that are in the source module
will have the indices shifted by this amount.
The table as well must be updated by increasing all the function indices by
this constant.</p>
</div></div></div><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.HasTransformationContext.html" title="wasm_transform::metering_transformation::HasTransformationContext trait">HasTransformationContext</a></div><div class="item-right docblock-short"><p>A helper trait so that we can use the transformation on different datatypes.
In particular we use it in tests which have their own notion of context to
make it possible to specify modules in a compact way.</p>
</div></div></div><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.inject_accounting.html" title="wasm_transform::metering_transformation::inject_accounting fn">inject_accounting</a></div><div class="item-right docblock-short"><p>Inject cost accounting into the function, according to cost
specification version XXX.</p>
</div></div></div><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.TransformationResult.html" title="wasm_transform::metering_transformation::TransformationResult type">TransformationResult</a></div><div class="item-right docblock-short"><p>Result of a transformation. The transformation should generally not fail on
a well-formed module, i.e., one that has been validated. But we might want
to put additional restrictions on a module, in which case we have the
freedom to fail.</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="wasm_transform" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>