<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This module defines a parser for the Web assembly binary format conforming to the specification in wasm-core-1-20191205 but with further restrictions to ensure suitability for the Concordium blockchain."><meta name="keywords" content="rust, rustlang, rust-lang, parse"><title>wasm_transform::parse - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../wasm_transform/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><h2 class="location">Module parse</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="parse" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">wasm_transform</a>::<wbr><a class="mod" href="#">parse</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/wasm_transform/parse.rs.html#1-1183" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This module defines a parser for the Web assembly binary format conforming
to the specification in <a href="https://www.w3.org/TR/2019/REC-wasm-core-1-20191205/">wasm-core-1-20191205</a> but with further
restrictions to ensure suitability for the Concordium blockchain.</p>
<p>In particular all floating point types and instructions are removed and will
cause a parsing error. The reason for this is that we currently do not
support floating point types to ensure determinism, and to simplify the
validator and further stages we simply remove those instructions at the
parsing stage.</p>
<p>Parsing is organized into two stages. In the first stage bytes are parsed
into a Skeleton, which is simply a list of sections, the sections themselves
being unparsed. This structure is useful for some operations, such as
pruning and embedding additional metadata into the module.</p>
<p>In the second stage each section can be parsed into a proper structure.</p>
</div></details><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CodeSkeleton.html" title="wasm_transform::parse::CodeSkeleton struct">CodeSkeleton</a></div><div class="item-right docblock-short"><p>The body of a function.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CodeSkeletonSection.html" title="wasm_transform::parse::CodeSkeletonSection struct">CodeSkeletonSection</a></div><div class="item-right docblock-short"><p>The Default instance of this type returns an empty code section.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.OpCodeIterator.html" title="wasm_transform::parse::OpCodeIterator struct">OpCodeIterator</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Skeleton.html" title="wasm_transform::parse::Skeleton struct">Skeleton</a></div><div class="item-right docblock-short"><p>Skeleton of a module, which is a list of sections that are minimally
processed.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.UnparsedSection.html" title="wasm_transform::parse::UnparsedSection struct">UnparsedSection</a></div><div class="item-right docblock-short"><p>A section carved out of a module, but with no further processing.
It can be serialized back by writing the section ID and bytes together with
the length. The lifetime is the lifetime of the original byte array this
section was carved from.</p>
</div></div></div><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ParseError.html" title="wasm_transform::parse::ParseError enum">ParseError</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.SectionId.html" title="wasm_transform::parse::SectionId enum">SectionId</a></div><div class="item-right docblock-short"><p>All supported section IDs as specified by the Web assembly specification.</p>
</div></div></div><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.GetParseable.html" title="wasm_transform::parse::GetParseable trait">GetParseable</a></div><div class="item-right docblock-short"><p>A helper trait for more convenient use. The difference from the above is
that typically the result type is determined by the context, which we take
advantage of to reduce the need for typing annotations which would be needed
by the Parseable trait.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Parseable.html" title="wasm_transform::parse::Parseable trait">Parseable</a></div><div class="item-right docblock-short"><p>A trait for parsing data. The lifetime is useful when we want to parse
data without copying, which is useful to avoid copying all the unparsed
sections.</p>
</div></div></div><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.decode_opcode.html" title="wasm_transform::parse::decode_opcode fn">decode_opcode</a></div><div class="item-right docblock-short"><p>Decode the next opcode directly from the cursor.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.parse_custom.html" title="wasm_transform::parse::parse_custom fn">parse_custom</a></div><div class="item-right docblock-short"><p>Parse a custom section.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.parse_sec_with_default.html" title="wasm_transform::parse::parse_sec_with_default fn">parse_sec_with_default</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.parse_skeleton.html" title="wasm_transform::parse::parse_skeleton fn">parse_skeleton</a></div><div class="item-right docblock-short"><p>Try to parse the input as a Wasm module in binary format. This function
ensures</p>
</div></div></div><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Byte.html" title="wasm_transform::parse::Byte type">Byte</a></div><div class="item-right docblock-short"><p>Core datatypes.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ParseResult.html" title="wasm_transform::parse::ParseResult type">ParseResult</a></div><div class="item-right docblock-short"><p>Auxiliary type alias used by all the parsing functions.</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="wasm_transform" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>